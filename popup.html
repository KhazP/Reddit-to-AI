<!DOCTYPE html>
<html>

<head>
  <title data-i18n="extName">Reddit to AI</title>
  <meta charset="UTF-8">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="popup.css">
</head>

<body>
  <div class="popup-container">
    <!-- Toast Container (absolutely positioned overlay) -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Header -->
    <header class="header">
      <div class="logo">
        <img src="images/icon32.png" width="28" height="28" class="logo-icon" alt="Reddit to AI">
        <span class="logo-text">
          <span class="logo-reddit">Reddit</span><span class="logo-to">to</span><span class="logo-ai">AI</span>
        </span>
      </div>
      <div class="header-actions">
        <button id="feedbackBtn" class="settings-btn" title="Send feedback">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
          </svg>
        </button>
        <button id="optionsBtn" class="settings-btn" title="Settings">
        <!-- Feather Icons gear cog -->
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="3"></circle>
          <path
            d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z">
          </path>
        </svg>
        </button>
      </div>
    </header>

    <!-- Prompt Preset Select -->
    <div class="preset-section">
      <label class="section-label" data-i18n="popup_header_preset">Prompt Preset</label>
      <div class="preset-cards" id="presetCards">
        <!-- Summarize -->
        <button class="preset-card" data-preset="summarize" data-i18n-title="preset_summarize_desc"
          title="TL;DR of the thread">
          <img src="images/summarizelogo.svg" alt="Summarize" class="preset-icon" width="24" height="24">
          <span class="preset-name" data-i18n="preset_summarize_name">Summary</span>
        </button>
        <!-- Key Takeaways -->
        <button class="preset-card" data-preset="takeaways" data-i18n-title="preset_takeaways_desc"
          title="Key insights">
          <img src="images/keytakeawayslogo.svg" alt="Takeways" class="preset-icon" width="24" height="24">
          <span class="preset-name" data-i18n="preset_takeaways_name">Takeaways</span>
        </button>
        <!-- ELI5 -->
        <button class="preset-card" data-preset="eli5" data-i18n-title="preset_eli5_desc"
          title="Explain like I'm 5">
          <img src="images/eli5logo.svg" alt="ELI5" class="preset-icon" width="24" height="24">
          <span class="preset-name" data-i18n="preset_eli5_name">ELI5</span>
        </button>
        <!-- Sentiment -->
        <button class="preset-card" data-preset="sentiment" data-i18n-title="preset_sentiment_desc"
          title="Sentiment Analysis">
          <img src="images/sentimentlogo.svg" alt="Sentiment" class="preset-icon" width="24" height="24">
          <span class="preset-name" data-i18n="preset_sentiment_name">Sentiment</span>
        </button>
        <!-- Debate -->
        <button class="preset-card" data-preset="debate" data-i18n-title="preset_debate_desc"
          title="Debate Analysis">
          <img src="images/debatelogo.svg" alt="Debate" class="preset-icon" width="24" height="24">
          <span class="preset-name" data-i18n="preset_debate_name">Debate</span>
        </button>
        <!-- Custom -->
        <button class="preset-card" data-preset="custom" data-i18n-title="preset_custom_desc"
          title="Custom Template">
          <img src="images/customlogo.svg" alt="Custom" class="preset-icon" width="24" height="24">
          <span class="preset-name" data-i18n="preset_custom_name">Custom</span>
        </button>
      </div>
    </div>

    <!-- Quick Prompt -->
    <div class="quick-prompt-section">
      <textarea id="quickPrompt" class="quick-prompt-input"
        placeholder="Type a quick prompt to override preset..." rows="1"></textarea>
    </div>

    <!-- Quick Filters -->
    <div class="filters-section">
      <div class="filters-header">
        <span class="filters-title" data-i18n="popup_filter_title">Quick Filters</span>
        <button id="expandFiltersBtn" class="expand-filters-btn" aria-expanded="false"
          title="Toggle advanced filters">
          <svg class="expand-arrow" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
            stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="6 9 12 15 18 9"></polyline>
          </svg>
        </button>
      </div>

      <!-- Main pills row -->
      <div class="pills-row">
        <div class="custom-select-wrap" id="minScoreWrap">
          <button class="filter-select-compact custom-select-btn" id="filterMinScoreBtn"
            aria-expanded="false" aria-haspopup="listbox">
            <span id="filterMinScoreLabel">Any score</span>
            <svg class="custom-select-arrow" width="10" height="6" viewBox="0 0 10 6" fill="none">
              <path d="M1 1l4 4 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                stroke-linejoin="round" />
            </svg>
          </button>
          <div class="custom-select-dropdown" id="filterMinScoreDropdown" aria-hidden="true" role="listbox">
            <button class="custom-select-option selected" data-value="0" role="option">Any score</button>
            <button class="custom-select-option" data-value="5" role="option">5+ pts</button>
            <button class="custom-select-option" data-value="10" role="option">10+ pts</button>
            <button class="custom-select-option" data-value="25" role="option">25+ pts</button>
            <button class="custom-select-option" data-value="50" role="option">50+ pts</button>
            <button class="custom-select-option" data-value="100" role="option">100+ pts</button>
          </div>
        </div>
        <button id="filterHideBotsBtn" class="pill-toggle" data-key="hideBots">
          <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
            stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="8" r="4" />
            <path d="M4 20c0-4 3.6-7 8-7s8 3 8 7" />
          </svg>
          Hide Bots
        </button>
        <button id="filterOpOnlyBtn" class="pill-toggle" data-key="op">OP Only</button>
        <button id="filterFlairedBtn" class="pill-toggle" data-key="flaired">Flaired</button>
      </div>

      <!-- Collapsible advanced panel -->
      <div id="advancedFilters" class="advanced-filters" aria-hidden="true">
        <div class="advanced-filters-inner">
          <!-- Top N -->
          <div class="adv-row">
            <label class="adv-label" for="filterTopN">Top N comments</label>
            <input type="number" id="filterTopN" class="adv-number-input" min="0" max="1000" placeholder="All">
          </div>

          <!-- Scrape Depth -->
          <div class="adv-row adv-row--stacked">
            <label class="adv-label">Scrape Depth</label>
            <div class="depth-cards-row">
              <label class="depth-card-mini">
                <input type="radio" name="scrapeDepthPopup" value="2">
                <span>Quick</span>
              </label>
              <label class="depth-card-mini">
                <input type="radio" name="scrapeDepthPopup" value="5">
                <span>Standard</span>
              </label>
              <label class="depth-card-mini">
                <input type="radio" name="scrapeDepthPopup" value="10">
                <span>Deep</span>
              </label>
              <label class="depth-card-mini">
                <input type="radio" name="scrapeDepthPopup" value="50" checked>
                <span>Full</span>
              </label>
            </div>
          </div>

          <!-- Include removed/deleted -->
          <label class="toggle-row compact">
            <span class="toggle-label" data-i18n="popup_filter_includeHidden">Include removed/deleted</span>
            <div class="toggle-switch small">
              <input type="checkbox" id="includeHidden">
              <span class="toggle-slider"></span>
            </div>
          </label>
        </div>
      </div>
    </div>

    <!-- Action Button -->
    <button id="scrapeBtn" class="btn btn-primary">
      <svg class="btn-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
        stroke-width="2">
        <polygon points="5 3 19 12 5 21 5 3"></polygon>
      </svg>
      <span class="btn-text" data-i18n="popup_btn_scrape">Scrape & Send</span>
    </button>

    <button id="stopScrapeBtn" class="btn btn-danger" style="display: none;">
      <svg class="btn-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
        stroke-width="2">
        <rect x="6" y="6" width="12" height="12"></rect>
      </svg>
      <span class="btn-text" data-i18n="popup_btn_stop">Stop</span>
    </button>
  </div>
  <script src="i18n.js"></script>
  <script src="popup.js"></script>
</body>

</html>
